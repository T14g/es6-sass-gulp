"use strict";var TRAY_URL="https://www.mesachiq.com.br/web_api/products",VARIANTS_URL="https://www.mesachiq.com.br/web_api/products/variants",toggleDiametro=function(){var e=document.querySelector(".select-diametro"),t=document.querySelector(".select-largura"),n=document.querySelector(".select-comprimento");e&&"none"===e.style.display?(e.style.display="block",t.style.display="none",n.style.display="none"):(e.style.display="none",t.style.display="block",n.style.display="block")},getURL=function(){var e=VARIANTS_URL,t=getLargura(),n=getComprimento(),r=getDiametro();return console.log(t),console.log(n),console.log(r),""!==r?e+="?type_1=Diametro&value_1=".concat(r):""!==t?(e+="?type_1=Largura&value_1=".concat(t),""!==n&&(e+="&type_2=Comprimento&value_2=".concat(n))):""!==n&&(e+="?type_2=Comprimento&value_2=".concat(n)),e},getLargura=function(){return document.querySelector(".select-largura").value},getComprimento=function(){return document.querySelector(".select-comprimento").value},getDiametro=function(){return document.querySelector(".select-diametro").value};document.getElementById("checkboxRedondas").addEventListener("change",function(){toggleDiametro()}),document.getElementById("btn-filtro-buscar").addEventListener("click",function(){fetchProducts(),console.log("fire")});var getParentsURLS=function(e){var t=[];return e.forEach(function(e){t.push(TRAY_URL+"/"+e.prod_id)}),t},setParentData=function(e,n){e.forEach(function(t){n.forEach(function(e){e.prod_id===t.Product.id&&(e.name=t.Product.name,e.available=t.Product.available)})})},getProductList=function(e){var r=[];return console.log(e),e.forEach(function(e){var t,n={};n.prod_id=e.Variant.product_id,n.img=null===(t=e.Variant.VariantImage[0])||void 0===t?void 0:t.https,n.name="",n.url=e.Variant.url.https,n.price=e.Variant.price,n.available="",r.push(n)}),r},fetchProducts=function(){fetch(getURL()).then(function(e){return e.json()}).then(function(e){var e=e.Variants,t=getProductList(e),e=getParentsURLS(t);Promise.all(e.map(function(e){return fetch(e).then(function(e){return e.json()})})).then(function(e){setParentData(e,t),renderProducts(t)})})},renderProducts=function(e){var t="",n=document.getElementById("filtered-products-list");e.forEach(function(e){t+='\n    <div class="filter-product-single">\n      <a href="'.concat(e.url,'" target="_blank">\n        <img src="').concat(e.img,'" />\n        <div className="name">').concat(e.url,"</div>\n        ").concat(e.available?'<div className="price">A Partir de R$ '.concat(e.price,"</div>"):'<div className="available">Indispon√≠vel</div>',"\n      </a>\n    </div>\n    ")}),n.innerHTML=t};