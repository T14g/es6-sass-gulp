"use strict";var TRAY_URL="https://www.mesachiq.com.br/web_api/products",VARIANTS_URL="https://www.mesachiq.com.br/web_api/products/variants",enableSearch=function(){return document.getElementById("btn-filtro-buscar").disabled=!1},disableSearch=function(){return document.getElementById("btn-filtro-buscar").disabled=!0},showLoadMore=function(){return document.getElementById("btn-load-more").classList.remove("hidden-btn")},hideLoadMore=function(){return document.getElementById("btn-load-more").classList.add("hidden-btn")},enableLoadMore=function(){return document.getElementById("btn-load-more").disabled=!1},disableLoadMore=function(){return document.getElementById("btn-load-more").disabled=!0},toggleSearch=function(){(validateSearch()?enableSearch:disableSearch)()},toggleDiametro=function(){var e=document.querySelector(".select-diametro"),t=document.querySelector(".select-largura"),n=document.querySelector(".select-comprimento");e&&e.classList.contains("hidden-select")?(e.classList.remove("hidden-select"),t.classList.add("hidden-select"),n.classList.add("hidden-select")):(e.classList.add("hidden-select"),t.classList.remove("hidden-select"),n.classList.remove("hidden-select"))},getURL=function(){var e=VARIANTS_URL,t=getLargura(),n=getComprimento(),r=getDiametro();return console.log(t),console.log(n),console.log(r),""!==r?e+="?type_1=Diametro&value_1=".concat(r):""!==t?(e+="?type_1=Largura&value_1=".concat(t),""!==n&&(e+="&type_2=Comprimento&value_2=".concat(n))):""!==n&&(e+="?type_2=Comprimento&value_2=".concat(n)),e},getLargura=function(){return document.querySelector(".select-largura").value},getComprimento=function(){return document.querySelector(".select-comprimento").value},getDiametro=function(){return document.querySelector(".select-diametro").value};document.getElementById("checkboxRedondas").addEventListener("change",toggleDiametro),document.getElementById("btn-filtro-buscar").addEventListener("click",function(){return fetchProducts()}),document.getElementById("select-largura").addEventListener("change",toggleSearch),document.getElementById("select-comprimento").addEventListener("change",toggleSearch),document.getElementById("select-diametro").addEventListener("change",function(){toggleSearch()});var validateSearch=function(){var e=!1;return""!==getLargura()&&(e=!0),""!==getComprimento()&&(e=!0),""!==getDiametro()&&(e=!0),e},getParentsURLS=function(e){var t=[];return e.forEach(function(e){t.push(TRAY_URL+"/"+e.prod_id)}),t},setParentData=function(e,n){e.forEach(function(t){n.forEach(function(e){e.prod_id===t.Product.id&&(e.name=t.Product.name,e.available=t.Product.available)})})},getProductList=function(e){var r=[];return console.log(e),e.forEach(function(e){var t,n={};n.prod_id=e.Variant.product_id,n.img=null===(t=e.Variant.VariantImage[0])||void 0===t?void 0:t.https,n.name="",n.url=e.Variant.url.https,n.price=e.Variant.price,n.available="",r.push(n)}),r},fetchProducts=function(){fetch(getURL()).then(function(e){return e.json()}).then(function(e){var e=e.Variants,t=getProductList(e),e=getParentsURLS(t);Promise.all(e.map(function(e){return fetch(e).then(function(e){return e.json()})})).then(function(e){setParentData(e,t),renderProducts(t)})})},renderProducts=function(e){var t="",n=document.getElementById("filtered-products-list");0<e.length?(enableLoadMore(),showLoadMore()):(hideLoadMore(),disableLoadMore()),e.forEach(function(e){t+='\n    <div class="filter-product-single">\n      <a href="'.concat(e.url,'" target="_blank">\n        <img src="').concat(e.img,'" />\n        <div className="name">').concat(e.url,"</div>\n        ").concat(e.available?'<div className="price">A Partir de R$ '.concat(e.price,"</div>"):'<div className="available">Indispon√≠vel</div>',"\n      </a>\n    </div>\n    ")}),n.innerHTML=t};